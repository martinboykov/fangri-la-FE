<ion-content [fullscreen]="true">
  <app-header-inner-page [defaultHref]="'/artists/list'"
                         [title]="'MERCHANDISE.TITLE' | translate"
                         [itemsCount]="merchandiseStore.totalItemsCount()"
                         [artistCount]="merchandiseStore.totalArtistCount()"></app-header-inner-page>
  <div class="container section-spacing">
    <div class="text-black-100"></div>

    <div class="grid grid-cols-[repeat(auto-fill,minmax(300px,1fr))] gap-xl sm:grid-cols-1">
      @for(merchandise of merchandiseStore.items(); let i = $index; track $index){
      <div class="flex flex-col gap-lg">
        <ion-label class="font-bold text-white h1">{{ merchandise.artist }}</ion-label>
        <div class="flex gap-lg p-sm rounded-lg bg-white">
          <ion-img class="w-full h-full max-w-10 max-h-18 object-cover rounded-md overflow-hidden cursor-pointer"
                   [src]="merchandise.images[0] || '/assets/images/placeholder.svg'"
                   routerLink="/merchandise/{{ merchandise.id }}"
                   [state]="merchandise"></ion-img>
          <div class="flex flex-col justify-between gap-xs w-full text-black-100">
            <div class="flex flex-col gap-xs">
              @for(label of merchandise.labels; let j = $index; track $index){
              <div class="w-[fit-content] py-xs px-sm rounded-xs text-[10px] font-bold uppercase"
                   [style.color]="label.color"
                   [style.background-color]="label.background">
                {{label.name}}
              </div>

              }
              <div routerLink="/merchandise/{{ merchandise.id }}"
                   [state]="merchandise">
                <h2 class="text-2 cursor-pointer">
                  {{ merchandise.name }}
                </h2>
                <p class="text-[14px] line-clamp-3 cursor-pointer">{{ merchandise.description }}</p>
              </div>
            </div>
            <div class="flex justify-between items-center gap-2">
              <span class="">
                <span class="text-[20px]">{{currency}}</span>
                <span class="text-[30px] tracking-tighter">{{ merchandise.price }}</span>
              </span>
              @if(merchandise.status === MerchandiseStatusEnum.IN_STOCK){
              <ion-button class="min-h-5 w-full max-w-[140px]"
                          color="danger"
                          fill="solid"><span class="text-[14px] uppercase">{{ 'MERCHANDISE.BUTTON_ADD_TO_CART' | translate }}</span></ion-button>
              }
              @else if(merchandise.status === MerchandiseStatusEnum.OUT_OF_STOCK){
              <ion-button class="min-h-5 w-full max-w-[140px] pointer-events-none touch-none"
                          color="dark"
                          fill="clear"
                          ><span class="text-[14px] uppercase">{{'MERCHANDISE.BUTTON_SOLD_OUT' | translate}}</span></ion-button>
              }
              @if(merchandise.status === MerchandiseStatusEnum.IN_CART){
              <ion-button class="size-5 "
                          color="dark"
                          fill="clear">
                <div class="grid content-center size-4 gap-sm border-[1px] border-black-100 border-solid rounded-sm"
                     slot="icon-only">
                  <span class="icon-cart text-[24px]"></span>
                </div>
              </ion-button>
              }

            </div>

          </div>
        </div>
      </div>
      }
    </div>
  </div>
</ion-content>
